(()=>{"use strict";let e=["hearts-6.svg","hearts-7.svg","hearts-8.svg","hearts-9.svg","hearts-10.svg","hearts-jack.svg","hearts-queen.svg","hearts-king.svg","hearts-ace.svg","diamonds-6.svg","diamonds-7.svg","diamonds-8.svg","diamonds-9.svg","diamonds-10.svg","diamonds-jack.svg","diamonds-queen.svg","diamonds-king.svg","diamonds-ace.svg","spades-6.svg","spades-7.svg","spades-8.svg","spades-9.svg","spades-10.svg","spades-jack.svg","spades-queen.svg","spades-king.svg","spades-ace.svg","clubs-6.svg","clubs-7.svg","clubs-8.svg","clubs-9.svg","clubs-10.svg","clubs-jack.svg","clubs-queen.svg","clubs-king.svg","clubs-ace.svg"],s=null;const t={difficulty:4,duration:"",generatedCards:[],selectedCards:[]},a=document.querySelector(".difficulty-screen"),d=a.querySelector(".difficulty"),c=d.querySelectorAll(".difficulty__btn"),n=a.querySelector(".btn-start"),r=document.querySelector(".game-screen");d.addEventListener("click",(e=>{const s=e.target;s.classList.contains("difficulty__btn")&&(c.forEach((e=>{e.classList.remove("difficulty__btn_selected")})),s.classList.add("difficulty__btn_selected"),t.difficulty=+s.dataset.value)})),n.addEventListener("click",(()=>{a.classList.add("hidden"),r.classList.remove("hidden"),l(t.difficulty),t.generatedCards=i(t.generatedCards),u(),r.querySelector(".btn-reset").addEventListener("click",(()=>{u()}))}));const i=e=>e.sort((()=>Math.random()-.5)),l=s=>{do{let s=(a=e.length,Math.floor(Math.random()*a));t.generatedCards.includes(s)||t.generatedCards.push(s)}while(t.generatedCards.length<s);var a;t.generatedCards=[...t.generatedCards,...t.generatedCards]},g=()=>{t.selectedCards=[];let s=0;const a=r.querySelector(".game__cards");a.innerHTML="",t.generatedCards.forEach((d=>{const c=document.createElement("img");c.classList.add("card"),c.setAttribute("data-id",d),c.src=`./static/${e[d]}`,a.appendChild(c),c.addEventListener("click",(function a(){this.src=`./static/${e[d]}`,s%2==0?(t.selectedCards.push(d),s++):t.selectedCards[t.selectedCards.length-1]!==d?(o(),alert("Игра окончена! Вы проиграли.")):(t.selectedCards.push(d),s++),t.selectedCards.length===t.generatedCards.length&&(o(),alert("Выигрыш.")),this.removeEventListener("click",a)}))}))};function o(){s&&(clearTimeout(s),s=null)}function u(){o(),g(),setTimeout((function(){r.querySelectorAll(".card").forEach((e=>{e.src="./static/shirt.svg"})),function(){if(s)return;const e=r.querySelector(".game__panel-timer");e.textContent="0.00";const t=(new Date).getTime(),a=()=>{const d=(new Date).getTime()-t;e.textContent=(d/1e3).toFixed(1),s=window.setTimeout(a,50)};a()}()}),3e3)}})();