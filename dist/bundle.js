(()=>{"use strict";let e=["hearts-6.svg","hearts-7.svg","hearts-8.svg","hearts-9.svg","hearts-10.svg","hearts-jack.svg","hearts-queen.svg","hearts-king.svg","hearts-ace.svg","diamonds-6.svg","diamonds-7.svg","diamonds-8.svg","diamonds-9.svg","diamonds-10.svg","diamonds-jack.svg","diamonds-queen.svg","diamonds-king.svg","diamonds-ace.svg","spades-6.svg","spades-7.svg","spades-8.svg","spades-9.svg","spades-10.svg","spades-jack.svg","spades-queen.svg","spades-king.svg","spades-ace.svg","clubs-6.svg","clubs-7.svg","clubs-8.svg","clubs-9.svg","clubs-10.svg","clubs-jack.svg","clubs-queen.svg","clubs-king.svg","clubs-ace.svg"];const s={difficulty:4,duration:"",generatedCards:[],selectedCards:[]},t=document.querySelector(".difficulty-screen"),a=t.querySelector(".difficulty"),d=a.querySelectorAll(".difficulty__btn"),r=t.querySelector(".btn-start");a.addEventListener("click",(e=>{const t=e.target;t.classList.contains("difficulty__btn")&&(d.forEach((e=>{e.classList.remove("difficulty__btn_selected")})),t.classList.add("difficulty__btn_selected"),s.difficulty=+t.dataset.value)}));const c=document.querySelector(".game-screen"),n=()=>{s.selectedCards=[];let t=0;const a=c.querySelector(".game__cards");a.innerHTML="",s.generatedCards.forEach((d=>{const r=document.createElement("img");r.classList.add("card"),r.setAttribute("data-id",d),r.src=`./static/${e[d]}`,a.appendChild(r),r.addEventListener("click",(function a(){this.src=`./static/${e[d]}`,t%2==0?(s.selectedCards.push(d),t++):s.selectedCards[s.selectedCards.length-1]!==d?(clearInterval(s.timer),alert("Игра окончена! Вы проиграли.")):(s.selectedCards.push(d),t++),s.selectedCards.length===s.generatedCards.length&&(clearInterval(s.timer),alert("Выигрыш.")),this.removeEventListener("click",a)}))}))};r.addEventListener("click",(()=>{t.classList.add("hidden"),c.classList.remove("hidden");const a=c.querySelector(".game__panel-timer");let d,r,i=0;const l=()=>{s.duration=`${i}.${d}`,clearInterval(s.timer),a.innerHTML="0.00",n(),setTimeout((function(){c.querySelectorAll(".card").forEach((e=>{e.src="./static/shirt.svg"})),r=Date.now(),i=0,s.timer=setInterval((function(){d=Math.floor((Date.now()-r)/1e3),60===d&&(r=Date.now(),i++),d<10&&(d="0"+d),a.innerHTML=i+"."+d}))}),3e3)};(t=>{do{let t=(a=e.length,Math.floor(Math.random()*a));s.generatedCards.includes(t)||s.generatedCards.push(t)}while(s.generatedCards.length<t);var a;s.generatedCards=[...s.generatedCards,...s.generatedCards]})(s.difficulty),s.generatedCards=s.generatedCards.sort((()=>Math.random()-.5)),l(),c.querySelector(".btn-reset").addEventListener("click",(()=>{l()}))}))})();